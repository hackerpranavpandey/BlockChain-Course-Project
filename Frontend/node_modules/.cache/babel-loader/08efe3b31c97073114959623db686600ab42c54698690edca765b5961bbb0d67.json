{"ast":null,"code":"var _jsxFileName = \"/home/pranav/Documents/Blockchain-Project/Blockchain-Project/Blockchain-Project/t/client/src/components/Display.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { useState, useCallback, useEffect } from \"react\";\nimport \"./Display.css\"; // Make sure this CSS file exists\n\n// --- Hashing Helper (Keep as is) ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst calculateArrayBufferHash = async buffer => {\n  if (!buffer || buffer.byteLength === 0) {\n    throw new Error(\"Cannot hash empty or invalid buffer.\");\n  }\n  try {\n    const hashBuffer = await crypto.subtle.digest('SHA-256', buffer);\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\n    const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n    return hashHex;\n  } catch (error) {\n    console.error(\"Error during crypto.subtle.digest:\", error);\n    throw new Error(\"Hashing failed. Crypto API might not be available or input was invalid.\");\n  }\n};\n\n// --- URL Builder Helper (Keep as is, using Pinata default) ---\nconst buildDisplayUrl = cidOrUri => {\n  if (!cidOrUri || typeof cidOrUri !== 'string' || cidOrUri.trim().length === 0) {\n    console.warn(`Invalid input for buildDisplayUrl: ${cidOrUri}`);\n    return null;\n  }\n  const gateways = [\"https://gateway.pinata.cloud/ipfs/\",\n  // Using Pinata\n  \"https://ipfs.io/ipfs/\", \"https://cloudflare-ipfs.com/ipfs/\", \"https://dweb.link/ipfs/\"];\n  const gateway = gateways[0]; // Pinata\n\n  if (cidOrUri.startsWith('http://') || cidOrUri.startsWith('https://')) {\n    if (gateways.some(gw => cidOrUri.startsWith(gw))) {\n      return cidOrUri;\n    } else {\n      console.warn(`URL is HTTP(S) but not a recognized IPFS gateway: ${cidOrUri}`);\n      return cidOrUri;\n    }\n  } else if (cidOrUri.startsWith('ipfs://')) {\n    const cid = cidOrUri.substring(7);\n    return cid.length > 40 ? `${gateway}${cid}` : null;\n  } else if ((cidOrUri.startsWith('Qm') || cidOrUri.startsWith('b')) && cidOrUri.length > 40) {\n    console.log(`Identified CID: ${cidOrUri}, building URL with ${gateway}`);\n    return `${gateway}${cidOrUri}`;\n  } else {\n    console.warn(`Skipping unrecognized format for URL building: ${cidOrUri}`);\n    return null;\n  }\n};\n\n// --- MediaRenderer Component (Keep as is with 'tryVideo' logic) ---\nconst MediaRenderer = ({\n  url,\n  altText\n}) => {\n  _s();\n  const [mediaType, setMediaType] = useState('unknown');\n  const [tryVideo, setTryVideo] = useState(false);\n  const [hasError, setHasError] = useState(false);\n  useEffect(() => {\n    setHasError(false);\n    setTryVideo(false);\n    if (!url) {\n      setMediaType('unknown');\n      setHasError(true);\n      console.warn(\"MediaRenderer received invalid URL:\", url);\n      return;\n    }\n    const extensionMatch = url.match(/\\.([^.?#]+)(?:[?#]|$)/i);\n    const extension = extensionMatch ? extensionMatch[1].toLowerCase() : null;\n    const imageExtensions = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'svg'];\n    const videoExtensions = ['mp4', 'webm', 'ogg', 'mov', 'avi', 'mkv', 'qt'];\n    if (imageExtensions.includes(extension)) {\n      setMediaType('image');\n    } else if (videoExtensions.includes(extension)) {\n      setMediaType('video');\n    } else {\n      setMediaType('unknown');\n    }\n  }, [url]);\n  const handleImageError = () => {\n    if (mediaType === 'unknown' && !hasError) {\n      console.warn(`Image attempt failed for unknown type: ${url}. Setting flag to try video render.`);\n      setTryVideo(true);\n    } else {\n      console.warn(`Failed to load image from: ${url}. Setting final error state.`);\n      setHasError(true);\n    }\n  };\n  const handleVideoError = () => {\n    console.warn(`Failed to load video from: ${url}. Setting final error state.`);\n    setHasError(true);\n  };\n  if (hasError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"media-fallback error\",\n      children: [\"\\u26A0\\uFE0F Error loading media.\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: url,\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        children: \"Open Link\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this);\n  }\n  if (mediaType === 'video' || tryVideo) {\n    return /*#__PURE__*/_jsxDEV(\"video\", {\n      src: url,\n      controls: true,\n      preload: \"metadata\",\n      className: \"media-item video-item\",\n      onError: handleVideoError,\n      children: [\"Your browser does not support the video tag.\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n        href: url,\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        children: \"Download video\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, url + '-video', true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this);\n  }\n  if (mediaType === 'image' || mediaType === 'unknown' && !tryVideo) {\n    return /*#__PURE__*/_jsxDEV(\"img\", {\n      src: url,\n      alt: altText,\n      className: \"media-item image-list-item\",\n      onError: handleImageError,\n      loading: \"lazy\"\n    }, url + '-image', false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"media-fallback\",\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 10\n  }, this);\n};\n\n// --- Main Display Component ---\n_s(MediaRenderer, \"/n0JtVkqEnvb8bspR6pNFeGXlpA=\");\n_c = MediaRenderer;\nconst Display = ({\n  contract,\n  account\n}) => {\n  _s2();\n  const [displayData, setDisplayData] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [verificationStatus, setVerificationStatus] = useState({});\n\n  // --- getdata Function (Keep as is) ---\n  const getdata = async () => {\n    setDisplayData([]);\n    setMessage(\"\");\n    setLoading(true);\n    setVerificationStatus({});\n    const otherAddressInput = document.querySelector(\".address\");\n    const otherAddress = otherAddressInput === null || otherAddressInput === void 0 ? void 0 : otherAddressInput.value.trim();\n    let addressToQuery = otherAddress || account;\n    if (!contract) {\n      setMessage(\"Error: Contract not loaded yet.\");\n      setLoading(false);\n      return;\n    }\n    if (!addressToQuery) {\n      setMessage(\"Error: No address specified or connected.\");\n      setLoading(false);\n      return;\n    }\n    if (!/^0x[a-fA-F0-9]{40}$/.test(addressToQuery)) {\n      setMessage(\"Error: Invalid Ethereum address format provided.\");\n      setLoading(false);\n      return;\n    }\n    addressToQuery = addressToQuery.toLowerCase();\n    try {\n      setMessage(`Fetching content for ${addressToQuery.substring(0, 6)}...${addressToQuery.substring(addressToQuery.length - 4)}`);\n      console.log(`Fetching data for address: ${addressToQuery}`);\n      const result = await contract.display(addressToQuery);\n      console.log(\"Raw contract result:\", result);\n      if (!Array.isArray(result) || result.length !== 2 || !Array.isArray(result[0]) || !Array.isArray(result[1])) {\n        let errorDetail = \"Contract did not return the expected structure [[string], [string]].\";\n        if (result === null || typeof result !== 'object') {\n          errorDetail = `Contract returned non-array data: ${result}`;\n        }\n        throw new Error(`${errorDetail} Check contract logic or address permissions.`);\n      }\n      const cidsArray = result[0];\n      const hashesArray = result[1];\n      if (cidsArray.length !== hashesArray.length) {\n        throw new Error(\"Contract returned mismatched CID and Hash data.\");\n      }\n      if (cidsArray.length === 0) {\n        setMessage(`No content data found for address ${addressToQuery.substring(0, 6)}...`);\n        setDisplayData([]);\n      } else {\n        const processedData = [];\n        const initialStatus = {};\n        for (let i = 0; i < cidsArray.length; i++) {\n          const cid = cidsArray[i];\n          const hash = hashesArray[i];\n          const displayUrl = buildDisplayUrl(cid);\n          console.log(`Processing Item ${i}: CID='${cid}', Hash='${hash}', Generated URL='${displayUrl}'`);\n          if (displayUrl && typeof hash === 'string' && hash.length > 10) {\n            const uniqueId = displayUrl;\n            processedData.push({\n              id: uniqueId,\n              cid: cid,\n              hash: hash,\n              displayUrl: displayUrl\n            });\n            initialStatus[uniqueId] = 'idle';\n          } else {\n            console.warn(`Skipping item ${i}: Invalid URL ('${displayUrl}') or Hash ('${hash}') derived from CID '${cid}'`);\n          }\n        }\n        if (processedData.length > 0) {\n          console.log(\"Setting display data:\", processedData);\n          setDisplayData(processedData);\n          setVerificationStatus(initialStatus);\n          setMessage(\"\");\n        } else {\n          setDisplayData([]);\n          setMessage(`No processable content URLs/hashes found for address ${addressToQuery.substring(0, 6)}...`);\n        }\n      }\n    } catch (e) {\n      var _e$data, _e$error;\n      console.error(\"Error during getdata execution:\", e);\n      let specificError = e.message || \"An unknown error occurred.\";\n      if (e.reason) {\n        specificError = e.reason;\n      } else if ((_e$data = e.data) !== null && _e$data !== void 0 && _e$data.message) {\n        specificError = e.data.message;\n      } else if ((_e$error = e.error) !== null && _e$error !== void 0 && _e$error.message) {\n        specificError = e.error.message;\n      }\n      setMessage(`Error fetching data: ${specificError}. Please check the address and network.`);\n      setDisplayData([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- verifyHash Function (Keep as is) ---\n  const verifyHash = useCallback(async (imageUrl, expectedHash, itemId) => {\n    if (!imageUrl || !expectedHash || !itemId) {\n      console.error(\"Missing arguments for verifyHash\", {\n        imageUrl,\n        expectedHash,\n        itemId\n      });\n      setVerificationStatus(prev => ({\n        ...prev,\n        [itemId]: 'error'\n      }));\n      return;\n    }\n    setVerificationStatus(prev => ({\n      ...prev,\n      [itemId]: 'verifying'\n    }));\n    try {\n      console.log(`Verifying: Fetching content from ${imageUrl}`);\n      const response = await fetch(imageUrl);\n      if (!response.ok) {\n        throw new Error(`Fetch failed: ${response.status} ${response.statusText}`);\n      }\n      const fileBuffer = await response.arrayBuffer();\n      console.log(`Verifying: Calculating hash for item ${itemId} (${fileBuffer.byteLength} bytes)`);\n      const calculatedHash = await calculateArrayBufferHash(fileBuffer);\n      console.log(`Verifying: Calculated hash ${calculatedHash} for item ${itemId}`);\n      if (calculatedHash.toLowerCase() === expectedHash.toLowerCase()) {\n        setVerificationStatus(prev => ({\n          ...prev,\n          [itemId]: 'verified'\n        }));\n        console.log(`✅ Verification SUCCESS for ${itemId}`);\n      } else {\n        setVerificationStatus(prev => ({\n          ...prev,\n          [itemId]: 'mismatch'\n        }));\n        console.warn(`❌ Verification FAILED for ${itemId}: Hash mismatch! Expected: ${expectedHash}, Calculated: ${calculatedHash}`);\n      }\n    } catch (error) {\n      console.error(`❌ Verification ERROR for ${itemId}:`, error);\n      setVerificationStatus(prev => ({\n        ...prev,\n        [itemId]: 'error'\n      }));\n    }\n  }, []);\n\n  // --- getStatusInfo Function (Keep as is) ---\n  const getStatusInfo = status => {\n    switch (status) {\n      case 'verifying':\n        return {\n          text: 'Verifying...',\n          class: 'status-verifying'\n        };\n      case 'verified':\n        return {\n          text: '✅ Verified',\n          class: 'status-verified'\n        };\n      case 'mismatch':\n        return {\n          text: '❌ Mismatch',\n          class: 'status-mismatch'\n        };\n      case 'error':\n        return {\n          text: '⚠️ Error',\n          class: 'status-error'\n        };\n      case 'idle':\n      default:\n        return {\n          text: 'Not Verified',\n          class: 'status-idle'\n        };\n    }\n  };\n\n  // --- Component Return JSX ---\n  return (\n    /*#__PURE__*/\n    // <<< ADDED WRAPPER DIV >>>\n    _jsxDEV(\"div\", {\n      className: \"display-container\",\n      children: [message && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: `status-message ${message.startsWith('Error') ? 'error' : ''}`,\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 19\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"loading-indicator\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-list\",\n        children: [displayData.length === 0 && !loading && !message.startsWith('Error') && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"no-data-message\",\n          children: \"No items to display for this address.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }, this) /* Message when list is empty */, displayData.map(item => {\n          var _item$cid, _item$hash;\n          const statusInfo = getStatusInfo(verificationStatus[item.id]);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"image-item-container\",\n            children: [/*#__PURE__*/_jsxDEV(MediaRenderer, {\n              url: item.displayUrl,\n              altText: `IPFS file: ${(_item$cid = item.cid) === null || _item$cid === void 0 ? void 0 : _item$cid.substring(0, 10)}...`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"image-hash\",\n              title: item.hash,\n              children: [\"Hash: \", (_item$hash = item.hash) === null || _item$hash === void 0 ? void 0 : _item$hash.substring(0, 10), \"...\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"verification-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: `verification-status ${statusInfo.class}`,\n                children: statusInfo.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 17\n              }, this), (statusInfo.class === 'status-idle' || statusInfo.class === 'status-mismatch' || statusInfo.class === 'status-error') && /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"verify-button\",\n                onClick: () => verifyHash(item.displayUrl, item.hash, item.id),\n                disabled: loading || verificationStatus[item.id] === 'verifying',\n                children: \"Verify Hash\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this)]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Enter Address (Optional)\",\n          className: \"address\",\n          disabled: loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"center button\" // Keep 'center' class if used elsewhere\n          ,\n          onClick: getdata,\n          disabled: !contract || loading,\n          children: loading ? \"Loading...\" : \"Get Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 5\n    }, this) // <<< CLOSED WRAPPER DIV >>>\n  );\n};\n_s2(Display, \"PNsTf5w1qIECnEVf462mcMTnDoo=\");\n_c2 = Display;\nexport default Display;\nvar _c, _c2;\n$RefreshReg$(_c, \"MediaRenderer\");\n$RefreshReg$(_c2, \"Display\");","map":{"version":3,"names":["useState","useCallback","useEffect","jsxDEV","_jsxDEV","calculateArrayBufferHash","buffer","byteLength","Error","hashBuffer","crypto","subtle","digest","hashArray","Array","from","Uint8Array","hashHex","map","b","toString","padStart","join","error","console","buildDisplayUrl","cidOrUri","trim","length","warn","gateways","gateway","startsWith","some","gw","cid","substring","log","MediaRenderer","url","altText","_s","mediaType","setMediaType","tryVideo","setTryVideo","hasError","setHasError","extensionMatch","match","extension","toLowerCase","imageExtensions","videoExtensions","includes","handleImageError","handleVideoError","className","children","href","target","rel","fileName","_jsxFileName","lineNumber","columnNumber","src","controls","preload","onError","alt","loading","_c","Display","contract","account","_s2","displayData","setDisplayData","message","setMessage","setLoading","verificationStatus","setVerificationStatus","getdata","otherAddressInput","document","querySelector","otherAddress","value","addressToQuery","test","result","display","isArray","errorDetail","cidsArray","hashesArray","processedData","initialStatus","i","hash","displayUrl","uniqueId","push","id","e","_e$data","_e$error","specificError","reason","data","verifyHash","imageUrl","expectedHash","itemId","prev","response","fetch","ok","status","statusText","fileBuffer","arrayBuffer","calculatedHash","getStatusInfo","text","class","item","_item$cid","_item$hash","statusInfo","title","onClick","disabled","type","placeholder","_c2","$RefreshReg$"],"sources":["/home/pranav/Documents/Blockchain-Project/Blockchain-Project/Blockchain-Project/t/client/src/components/Display.js"],"sourcesContent":["import { useState, useCallback, useEffect } from \"react\";\nimport \"./Display.css\"; // Make sure this CSS file exists\n\n// --- Hashing Helper (Keep as is) ---\nconst calculateArrayBufferHash = async (buffer) => {\n  if (!buffer || buffer.byteLength === 0) {\n    throw new Error(\"Cannot hash empty or invalid buffer.\");\n  }\n  try {\n    const hashBuffer = await crypto.subtle.digest('SHA-256', buffer);\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\n    const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');\n    return hashHex;\n  } catch (error) {\n     console.error(\"Error during crypto.subtle.digest:\", error);\n     throw new Error(\"Hashing failed. Crypto API might not be available or input was invalid.\");\n  }\n};\n\n// --- URL Builder Helper (Keep as is, using Pinata default) ---\nconst buildDisplayUrl = (cidOrUri) => {\n    if (!cidOrUri || typeof cidOrUri !== 'string' || cidOrUri.trim().length === 0) {\n        console.warn(`Invalid input for buildDisplayUrl: ${cidOrUri}`);\n        return null;\n    }\n    const gateways = [\n        \"https://gateway.pinata.cloud/ipfs/\", // Using Pinata\n        \"https://ipfs.io/ipfs/\",\n        \"https://cloudflare-ipfs.com/ipfs/\",\n        \"https://dweb.link/ipfs/\",\n    ];\n    const gateway = gateways[0]; // Pinata\n\n    if (cidOrUri.startsWith('http://') || cidOrUri.startsWith('https://')) {\n        if (gateways.some(gw => cidOrUri.startsWith(gw))) {\n             return cidOrUri;\n        } else {\n            console.warn(`URL is HTTP(S) but not a recognized IPFS gateway: ${cidOrUri}`);\n             return cidOrUri;\n        }\n    }\n    else if (cidOrUri.startsWith('ipfs://')) {\n        const cid = cidOrUri.substring(7);\n        return cid.length > 40 ? `${gateway}${cid}` : null;\n    }\n    else if ((cidOrUri.startsWith('Qm') || cidOrUri.startsWith('b')) && cidOrUri.length > 40) {\n         console.log(`Identified CID: ${cidOrUri}, building URL with ${gateway}`);\n         return `${gateway}${cidOrUri}`;\n    }\n    else {\n        console.warn(`Skipping unrecognized format for URL building: ${cidOrUri}`);\n        return null;\n    }\n};\n\n// --- MediaRenderer Component (Keep as is with 'tryVideo' logic) ---\nconst MediaRenderer = ({ url, altText }) => {\n  const [mediaType, setMediaType] = useState('unknown');\n  const [tryVideo, setTryVideo] = useState(false);\n  const [hasError, setHasError] = useState(false);\n\n  useEffect(() => {\n    setHasError(false);\n    setTryVideo(false);\n\n    if (!url) {\n        setMediaType('unknown');\n        setHasError(true);\n        console.warn(\"MediaRenderer received invalid URL:\", url)\n        return;\n    }\n\n    const extensionMatch = url.match(/\\.([^.?#]+)(?:[?#]|$)/i);\n    const extension = extensionMatch ? extensionMatch[1].toLowerCase() : null;\n    const imageExtensions = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'svg'];\n    const videoExtensions = ['mp4', 'webm', 'ogg', 'mov', 'avi', 'mkv', 'qt'];\n\n    if (imageExtensions.includes(extension)) {\n      setMediaType('image');\n    } else if (videoExtensions.includes(extension)) {\n      setMediaType('video');\n    } else {\n      setMediaType('unknown');\n    }\n  }, [url]);\n\n  const handleImageError = () => {\n    if (mediaType === 'unknown' && !hasError) {\n      console.warn(`Image attempt failed for unknown type: ${url}. Setting flag to try video render.`);\n      setTryVideo(true);\n    } else {\n      console.warn(`Failed to load image from: ${url}. Setting final error state.`);\n      setHasError(true);\n    }\n  };\n\n  const handleVideoError = () => {\n    console.warn(`Failed to load video from: ${url}. Setting final error state.`);\n    setHasError(true);\n  };\n\n  if (hasError) {\n    return (\n      <div className=\"media-fallback error\">\n        ⚠️ Error loading media.{\" \"}\n        <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">Open Link</a>\n      </div>\n    );\n  }\n\n  if (mediaType === 'video' || tryVideo) {\n    return (\n      <video\n        key={url + '-video'}\n        src={url}\n        controls preload=\"metadata\"\n        className=\"media-item video-item\"\n        onError={handleVideoError}\n      >\n        Your browser does not support the video tag.{\" \"}\n        <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">Download video</a>\n      </video>\n    );\n  }\n\n  if (mediaType === 'image' || (mediaType === 'unknown' && !tryVideo)) {\n    return (\n      <img\n        key={url + '-image'}\n        src={url} alt={altText}\n        className=\"media-item image-list-item\"\n        onError={handleImageError} loading=\"lazy\"\n      />\n    );\n  }\n\n  return <div className=\"media-fallback\">Loading...</div>;\n};\n\n\n// --- Main Display Component ---\nconst Display = ({ contract, account }) => {\n  const [displayData, setDisplayData] = useState([]);\n  const [message, setMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [verificationStatus, setVerificationStatus] = useState({});\n\n  // --- getdata Function (Keep as is) ---\n   const getdata = async () => {\n    setDisplayData([]);\n    setMessage(\"\");\n    setLoading(true);\n    setVerificationStatus({});\n\n    const otherAddressInput = document.querySelector(\".address\");\n    const otherAddress = otherAddressInput?.value.trim();\n    let addressToQuery = otherAddress || account;\n\n    if (!contract) { setMessage(\"Error: Contract not loaded yet.\"); setLoading(false); return; }\n    if (!addressToQuery) { setMessage(\"Error: No address specified or connected.\"); setLoading(false); return; }\n    if (!/^0x[a-fA-F0-9]{40}$/.test(addressToQuery)) { setMessage(\"Error: Invalid Ethereum address format provided.\"); setLoading(false); return; }\n    addressToQuery = addressToQuery.toLowerCase();\n\n    try {\n        setMessage(`Fetching content for ${addressToQuery.substring(0,6)}...${addressToQuery.substring(addressToQuery.length-4)}`);\n        console.log(`Fetching data for address: ${addressToQuery}`);\n        const result = await contract.display(addressToQuery);\n        console.log(\"Raw contract result:\", result);\n\n        if (!Array.isArray(result) || result.length !== 2 || !Array.isArray(result[0]) || !Array.isArray(result[1])) {\n            let errorDetail = \"Contract did not return the expected structure [[string], [string]].\";\n             if (result === null || typeof result !== 'object') { errorDetail = `Contract returned non-array data: ${result}`; }\n             throw new Error(`${errorDetail} Check contract logic or address permissions.`);\n        }\n        const cidsArray = result[0];\n        const hashesArray = result[1];\n        if (cidsArray.length !== hashesArray.length) { throw new Error(\"Contract returned mismatched CID and Hash data.\"); }\n\n        if (cidsArray.length === 0) {\n            setMessage(`No content data found for address ${addressToQuery.substring(0,6)}...`);\n            setDisplayData([]);\n        } else {\n            const processedData = [];\n            const initialStatus = {};\n            for (let i = 0; i < cidsArray.length; i++) {\n                const cid = cidsArray[i];\n                const hash = hashesArray[i];\n                const displayUrl = buildDisplayUrl(cid);\n                console.log(`Processing Item ${i}: CID='${cid}', Hash='${hash}', Generated URL='${displayUrl}'`);\n                if (displayUrl && typeof hash === 'string' && hash.length > 10) {\n                    const uniqueId = displayUrl;\n                    processedData.push({ id: uniqueId, cid: cid, hash: hash, displayUrl: displayUrl });\n                    initialStatus[uniqueId] = 'idle';\n                } else {\n                    console.warn(`Skipping item ${i}: Invalid URL ('${displayUrl}') or Hash ('${hash}') derived from CID '${cid}'`);\n                }\n            }\n            if (processedData.length > 0) {\n                console.log(\"Setting display data:\", processedData);\n                setDisplayData(processedData);\n                setVerificationStatus(initialStatus);\n                setMessage(\"\");\n            } else {\n                setDisplayData([]);\n                setMessage(`No processable content URLs/hashes found for address ${addressToQuery.substring(0,6)}...`);\n            }\n        }\n    } catch (e) {\n        console.error(\"Error during getdata execution:\", e);\n        let specificError = e.message || \"An unknown error occurred.\";\n        if (e.reason) { specificError = e.reason; }\n        else if (e.data?.message) { specificError = e.data.message; }\n        else if (e.error?.message) { specificError = e.error.message; }\n        setMessage(`Error fetching data: ${specificError}. Please check the address and network.`);\n        setDisplayData([]);\n    } finally {\n       setLoading(false);\n    }\n};\n\n  // --- verifyHash Function (Keep as is) ---\n  const verifyHash = useCallback(async (imageUrl, expectedHash, itemId) => {\n    if (!imageUrl || !expectedHash || !itemId) {\n        console.error(\"Missing arguments for verifyHash\", { imageUrl, expectedHash, itemId });\n        setVerificationStatus(prev => ({ ...prev, [itemId]: 'error' }));\n        return;\n    }\n    setVerificationStatus(prev => ({ ...prev, [itemId]: 'verifying' }));\n    try {\n        console.log(`Verifying: Fetching content from ${imageUrl}`);\n        const response = await fetch(imageUrl);\n        if (!response.ok) { throw new Error(`Fetch failed: ${response.status} ${response.statusText}`); }\n        const fileBuffer = await response.arrayBuffer();\n        console.log(`Verifying: Calculating hash for item ${itemId} (${fileBuffer.byteLength} bytes)`);\n        const calculatedHash = await calculateArrayBufferHash(fileBuffer);\n        console.log(`Verifying: Calculated hash ${calculatedHash} for item ${itemId}`);\n        if (calculatedHash.toLowerCase() === expectedHash.toLowerCase()) {\n            setVerificationStatus(prev => ({ ...prev, [itemId]: 'verified' }));\n            console.log(`✅ Verification SUCCESS for ${itemId}`);\n        } else {\n            setVerificationStatus(prev => ({ ...prev, [itemId]: 'mismatch' }));\n            console.warn(`❌ Verification FAILED for ${itemId}: Hash mismatch! Expected: ${expectedHash}, Calculated: ${calculatedHash}`);\n        }\n    } catch (error) {\n        console.error(`❌ Verification ERROR for ${itemId}:`, error);\n        setVerificationStatus(prev => ({ ...prev, [itemId]: 'error' }));\n    }\n  }, []);\n\n  // --- getStatusInfo Function (Keep as is) ---\n  const getStatusInfo = (status) => {\n    switch (status) {\n        case 'verifying': return { text: 'Verifying...', class: 'status-verifying' };\n        case 'verified': return { text: '✅ Verified', class: 'status-verified' };\n        case 'mismatch': return { text: '❌ Mismatch', class: 'status-mismatch' };\n        case 'error': return { text: '⚠️ Error', class: 'status-error' };\n        case 'idle':\n        default: return { text: 'Not Verified', class: 'status-idle' };\n    }\n  };\n\n  // --- Component Return JSX ---\n  return (\n    // <<< ADDED WRAPPER DIV >>>\n    <div className=\"display-container\">\n      {/* Display Status/Error Messages */}\n      {message && <p className={`status-message ${message.startsWith('Error') ? 'error' : ''}`}>{message}</p>}\n      {/* Display Loading Indicator */}\n      {loading && <p className=\"loading-indicator\">Loading...</p>}\n\n      {/* Render List of Items */}\n      <div className=\"image-list\">\n        {displayData.length === 0 && !loading && !message.startsWith('Error') && (\n            <p className=\"no-data-message\">No items to display for this address.</p> /* Message when list is empty */\n        )}\n        {displayData.map((item) => {\n          const statusInfo = getStatusInfo(verificationStatus[item.id]);\n          return (\n            <div className=\"image-item-container\" key={item.id}>\n              <MediaRenderer\n                 url={item.displayUrl}\n                 altText={`IPFS file: ${item.cid?.substring(0, 10)}...`}\n              />\n              <p className=\"image-hash\" title={item.hash}>\n                  Hash: {item.hash?.substring(0, 10)}...\n              </p>\n              <div className=\"verification-section\">\n                <span className={`verification-status ${statusInfo.class}`}>\n                   {statusInfo.text}\n                </span>\n                {(statusInfo.class === 'status-idle' || statusInfo.class === 'status-mismatch' || statusInfo.class === 'status-error') && (\n                  <button\n                    className=\"verify-button\"\n                    onClick={() => verifyHash(item.displayUrl, item.hash, item.id)}\n                    disabled={loading || verificationStatus[item.id] === 'verifying'}\n                  >\n                    Verify Hash\n                  </button>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Input Controls */}\n      <div className=\"controls\">\n        <input\n            type=\"text\"\n            placeholder=\"Enter Address (Optional)\"\n            className=\"address\"\n            disabled={loading}\n          />\n          <button\n            className=\"center button\" // Keep 'center' class if used elsewhere\n            onClick={getdata}\n            disabled={!contract || loading}\n           >\n            {loading ? \"Loading...\" : \"Get Data\"}\n          </button>\n      </div>\n    </div> // <<< CLOSED WRAPPER DIV >>>\n  );\n};\n\nexport default Display;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}